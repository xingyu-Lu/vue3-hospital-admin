var v=Object.defineProperty,x=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var p=(t,o,n)=>o in t?v(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,b=(t,o)=>{for(var n in o||(o={}))w.call(o,n)&&p(t,n,o[n]);if(m)for(var n of m(o))j.call(o,n)&&p(t,n,o[n]);return t},_=(t,o)=>x(t,V(o));import{W as y}from"./wangEditor.89ec1222.js";import{_ as A,s as S,b as h}from"./index.7fc9ed56.js";import{ag as k,ak as B,u as H,r as M,o as N,b as I,an as R,t as $,d as c,e as z,n as E,w as r,E as F,j as d,g as L,k as C,i as q}from"./vendor.b8319b30.js";const O={name:"brief_add",setup(){const t=k(null),o=k(null),n=B(),f=H(),{id:l}=n.query,i=M({token:"Bearer "+S("token")||"",id:l,briefForm:{content:""},rules:{content:[{required:!1,message:"\u5185\u5BB9\u5FC5\u987B",trigger:["change"]}]}});let e;N(()=>{e=new y(t.value),e.config.showLinkImg=!1,e.config.showLinkImgAlt=!1,e.config.showLinkImgHref=!1,e.config.uploadImgMaxSize=10*1024*1024,e.config.uploadImgMaxLength=1,e.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp","webp"],e.config.uploadFileName="file",e.config.uploadImgHeaders={Authorization:i.token},e.config.uploadImgParams={basket:"img"},e.config.uploadImgHooks={customInsert:function(a,s){console.log("result",s),a(s.data.src)}},e.config.uploadImgServer=h,Object.assign(e.config,{onchange(){console.log("change")}}),e.config.uploadVideoServer=h,e.config.uploadVideoMaxSize=1*200*1024*1024,e.config.uploadVideoAccept=["mp4"],e.config.uploadVideoParams={basket:"video"},e.config.uploadVideoName="file",e.config.uploadVideoHeaders={Authorization:i.token},e.config.uploadVideoHooks={customInsert:function(a,s){console.log("customInsert",s),a(s.data.src)}},e.create(),l&&I.get(`/api/back/briefs/${l}`).then(a=>{i.briefForm={content:a.data.content},e&&e.txt.html(a.data.content)})}),R(()=>{e.destroy(),e=null});const u=()=>{o.value.validate(a=>{if(a){let s=I.post,g={content:e.txt.html()};s("/api/back/briefs",g).then(()=>{F.success("\u6DFB\u52A0\u6210\u529F"),f.push({path:"/general/brief"})})}})};return _(b({},$(i)),{editor:t,briefRef:o,submitAdd:u})}},P={ref:"editor"};function W(t,o,n,f,l,i){const e=c("el-form-item"),u=c("el-button"),a=c("el-form"),s=c("el-card");return z(),E(s,{style:{"min-height":"100%"}},{default:r(()=>[d(a,{model:t.briefForm,rules:t.rules,ref:"briefRef","label-width":"100px",style:{"margin-top":"30px"}},{default:r(()=>[d(e,{label:"\u5185\u5BB9",prop:"content"},{default:r(()=>[L("div",P,null,512)]),_:1}),d(e,null,{default:r(()=>[d(u,{type:"primary",onClick:o[0]||(o[0]=g=>f.submitAdd())},{default:r(()=>[C(q(t.id?"\u7ACB\u5373\u4FEE\u6539":"\u7ACB\u5373\u521B\u5EFA"),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}var K=A(O,[["render",W]]);export{K as default};
