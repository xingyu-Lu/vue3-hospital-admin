var S=Object.defineProperty,E=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var b=(t,e,n)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e)=>{for(var n in e||(e={}))N.call(e,n)&&b(t,n,e[n]);if(w)for(var n of w(e))A.call(e,n)&&b(t,n,e[n]);return t},f=(t,e)=>E(t,D(e));import{_ as B}from"./index.836c31ef.js";import{u as V,r as j,o as q,b as v,t as L,al as M,d as u,am as R,e as r,n as m,w as d,E as F,j as l,an as T,f as c,h as p,g as $,k as G}from"./vendor.15e5bf5f.js";const H={name:"rotate_list",setup(){const t=V(),e=j({loading:!1,tableData:[],srcList:[],total:0,currentPage:1,pageSize:10});q(()=>{n()});const n=()=>{e.loading=!0,v.get("/api/back/news",{params:{page:e.currentPage,page_size:e.pageSize}}).then(o=>{e.tableData=o.data,e.pageSize=o.pagination.perPage,e.total=o.pagination.total,e.currentPage=o.pagination.currentPage,e.loading=!1})},i=o=>{e.currentPage=o,n()},y=()=>{t.push({path:"/news-add"})},k=o=>{t.push({path:"/news-add",query:{id:o}})},g=o=>{t.push({path:"/news-preview",query:{id:o}})},s=(o,h)=>{v.put("/api/back/news/status",{id:o,status:h}).then(()=>{F.success("\u4FEE\u6539\u6210\u529F"),n()})};return f(C({},L(e)),{changePage:i,handleAdd:y,handleEdit:k,handleStatus:s,handlePreview:g,Plus:M})}},I=G("\u65B0\u589E"),J={key:0},K={key:1},O={key:2},Q={key:0,style:{color:"#67C23A"}},U={key:1,style:{color:"#E6A23C"}},W={key:2,style:{color:"#F56C6C"}},X=["onClick"],Y=["onClick"],Z=["onClick"],ee=["onClick"],te=["onClick"];function ae(t,e,n,i,y,k){const g=u("el-button"),s=u("el-table-column"),o=u("el-image"),h=u("el-table"),P=u("el-pagination"),x=u("el-card"),z=R("loading");return r(),m(x,{style:{"min-height":"100%"}},{header:d(()=>[l(g,{type:"primary",icon:i.Plus,onClick:i.handleAdd},{default:d(()=>[I]),_:1},8,["icon","onClick"])]),default:d(()=>[T((r(),m(h,{data:t.tableData,stripe:"",style:{width:"100%"}},{default:d(()=>[l(s,{prop:"id",label:"id"}),l(s,{label:"\u56FE\u7247"},{default:d(a=>[(r(),m(o,{key:a.row.id,src:a.row.url,lazy:!0,"initial-index":1},null,8,["src"]))]),_:1}),l(s,{prop:"type",label:"\u7C7B\u578B"},{default:d(a=>[a.row.type==0?(r(),c("span",J,"\u533B\u9662\u65B0\u95FB")):p("",!0),a.row.type==1?(r(),c("span",K,"\u533B\u9662\u516C\u544A")):p("",!0),a.row.type==2?(r(),c("span",O,"\u89C6\u9891\u65B0\u95FB")):p("",!0)]),_:1}),l(s,{prop:"title",label:"\u6807\u9898"}),l(s,{prop:"release_time",label:"\u53D1\u5E03\u65F6\u95F4"}),l(s,{prop:"num",label:"\u6D4F\u89C8\u6B21\u6570"}),l(s,{prop:"status",label:"\u72B6\u6001"},{default:d(a=>[a.row.status==1?(r(),c("span",Q,"\u5DF2\u5BA1\u6838")):a.row.status==0?(r(),c("span",U,"\u5F85\u5BA1\u6838")):(r(),c("span",W,"\u5DF2\u5220\u9664"))]),_:1}),l(s,{prop:"created_at",label:"\u521B\u5EFA\u65F6\u95F4"}),l(s,{label:"\u64CD\u4F5C",width:"200"},{default:d(a=>[$("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:_=>i.handlePreview(a.row.id)},"\u9884\u89C8",8,X),a.row.status!=2?(r(),c("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>i.handleEdit(a.row.id)},"\u4FEE\u6539",8,Y)):p("",!0),a.row.status!=2?(r(),c("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>i.handleStatus(a.row.id,2)},"\u5220\u9664",8,Z)):p("",!0),a.row.status==1?(r(),c("a",{key:2,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>i.handleStatus(a.row.id,0)},"\u64A4\u9500\u5BA1\u6838",8,ee)):a.row.status==0?(r(),c("a",{key:3,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>i.handleStatus(a.row.id,1)},"\u5BA1\u6838",8,te)):p("",!0)]),_:1})]),_:1},8,["data"])),[[z,t.loading]]),l(P,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:i.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var se=B(H,[["render",ae]]);export{se as default};
